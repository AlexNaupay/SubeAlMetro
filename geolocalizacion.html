<!DOCTYPE HTML>
<html>
    
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Geolocalizaci√≥n</title>
        <style type="text/css">
            #mapa {
                width: 100%;
                height: 75%;
            }
            #latitud {
                font-size: 20px;
                height: 100px;
            }
        </style>
    </head>
    
    <body onload="localizar()">
        
        <div id="chrono" role="main" style="width:1240px;height:700px;margin:0 auto;">
            <div id="mapa"></div>
            <div id="latitud"></div>
        </div>  
        
        <script src="js/OpenLayers.js"></script>
        <script>
            function localizar() {

                document.getElementById('mapa').innerHTML = "";
                document.getElementById('latitud').innerHTML = "";

                map = new OpenLayers.Map("mapa");
                var mapnik = new OpenLayers.Layer.OSM();
                map.addLayer(mapnik);


                navigator.geolocation.getCurrentPosition(function (position) {
                    document.getElementById('latitud').innerHTML = "Latitude: " + position.coords.latitude + "   Longitude: " + position.coords.longitude + "<p>";
                    var lonLat = new OpenLayers.LonLat(position.coords.longitude,
                    position.coords.latitude)
                        .transform(
                    new OpenLayers.Projection("EPSG:4326"), //transform from WGS 1984
                    map.getProjectionObject() //to Spherical Mercator Projection
                    );

                    markers.addMarker(new OpenLayers.Marker(lonLat));

                    map.setCenter(lonLat, 14 // Zoom level
                    );

                });
                //map = new OpenLayers.Map("mapa");
                //var mapnik = new OpenLayers.Layer.OSM();
                //map.addLayer(mapnik);
                map.setCenter(new
                OpenLayers.LonLat(3, 3) // Center of the map
                .transform(
                new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
                new OpenLayers.Projection("EPSG:900913") // to Spherical Mercator Projection
                ), 15 // Zoom level
                );
                var markers = new OpenLayers.Layer.Markers("Markers");
                map.addLayer(markers);

            }

            var url = "http://subealmetro.herokuapp.com/stations.json";
            var representationOfDesiredState = "The cheese is old and moldy, where is the bathroom?";

            var client = new XMLHttpRequest();

            client.open("GET", url, false);

            client.setRequestHeader("Content-Type", "text/plain");

            client.send("id");

            if (client.status == 200)
                alert("The request succeeded!\n\nThe response representation was:\n\n" + client.responseText)
            else
                alert("The request did not succeed!\n\nThe response status was: " + client.status + " " + client.statusText + ".");
        </script>
    </body>

</html>
